/*
jQuery heightFromBG 1.0.0
Copyright (c) 2014 Tomer Almog
License: MIT
*/
(function(e){e.fn.heightFromBG=function(t){var n=e.extend({selector:".show-bg"},t);e(window).resize(function(){setBGSize()});return this.each(function(){function r(){var r=e.Deferred();var i=e(".show-bg").length;console.log(i);e(n.selector).each(function(n,s){var o=e(this).width();var u=e(this);var a=e(this).css("background-image").replace("url(","").replace(")","").replace("'","").replace('"',"").replace('"',"");var f=e("<img />");f.hide();f.bind("load",function(){console.log(t);t.push({elem:u,height:e(this).height(),width:e(this).width()});console.log(t);if(n==i-1){r.resolve()}});e(this).append(f);f.attr("src",a)});return r}function i(){for(var e=0;e<t.length;e++){t[e].elem.css("height",t[e].height/t[e].width*t[e].elem.width())}}var t=new Array;r().done(i)})}})(jQuery)
